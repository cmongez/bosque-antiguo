<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Carrito</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
    <div class="container py-4">
        <h1 class="text-center mb-4">Carrito de compras</h1>

        <ul id="lista-carrito" class="list-group mb-3"></ul>
        <h5>Total: $<span id="total">0</span></h5>

        <div class="mt-3">
            <button class="btn btn-danger" onclick="vaciarCarrito()">Vaciar carrito</button>
            <a href="productos.html" class="btn btn-secondary">Seguir comprando</a>
        </div>
    </div>

    <script>
        function mostrarCarrito() {
            let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
            let lista = document.getElementById("lista-carrito");
            let totalElemento = document.getElementById("total");
            let total = 0;

            lista.innerHTML = "";

            carrito.forEach(item => {
                let li = document.createElement("li");
                li.className = "list-group-item d-flex justify-content-between align-items-center";
                li.innerHTML = `
            ${item.nombre} x${item.cantidad}
          <span class="badge bg-primary rounded-pill">$${item.precio * item.cantidad}</span>
        `;

                // BotÃ³n eliminar
                let btnEliminar = document.createElement("button");
                btnEliminar.className = "btn btn-sm btn-outline-danger ms-2";
                btnEliminar.textContent = "X";
                btnEliminar.onclick = () => eliminarProducto(item.nombre);

                li.appendChild(btnEliminar);
                lista.appendChild(li);

                total += item.precio * item.cantidad;
            });

            totalElemento.textContent = total;
        }

        function eliminarProducto(nombre) {
            let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
            carrito = carrito.filter(item => item.nombre !== nombre);
            localStorage.setItem("carrito", JSON.stringify(carrito));
            mostrarCarrito();
        }

        function vaciarCarrito() {
            localStorage.removeItem("carrito");
            mostrarCarrito();
        }

        mostrarCarrito();
    </script>
</body>

</html>